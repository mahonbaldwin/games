{
"version":3,
"file":"module$node_modules$asn1_DOT_js$lib$asn1$encoders$der.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/asn1_DOT_js/lib/asn1/encoders/der.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$asn1_DOT_js$lib$asn1$encoders$der\"] = function(global,require,module,exports) {\n'use strict';\n\nconst inherits = require('inherits');\nconst Buffer = require('safer-buffer').Buffer;\nconst Node = require('../base/node');\n\n// Import DER constants\nconst der = require('../constants/der');\n\nfunction DEREncoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n}\nmodule.exports = DEREncoder;\n\nDEREncoder.prototype.encode = function encode(data, reporter) {\n  return this.tree._encode(data, reporter).join();\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  Node.call(this, 'der', parent);\n}\ninherits(DERNode, Node);\n\nDERNode.prototype._encodeComposite = function encodeComposite(tag,\n  primitive,\n  cls,\n  content) {\n  const encodedTag = encodeTag(tag, primitive, cls, this.reporter);\n\n  // Short form\n  if (content.length < 0x80) {\n    const header = Buffer.alloc(2);\n    header[0] = encodedTag;\n    header[1] = content.length;\n    return this._createEncoderBuffer([ header, content ]);\n  }\n\n  // Long form\n  // Count octets required to store length\n  let lenOctets = 1;\n  for (let i = content.length; i >= 0x100; i >>= 8)\n    lenOctets++;\n\n  const header = Buffer.alloc(1 + 1 + lenOctets);\n  header[0] = encodedTag;\n  header[1] = 0x80 | lenOctets;\n\n  for (let i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8)\n    header[i] = j & 0xff;\n\n  return this._createEncoderBuffer([ header, content ]);\n};\n\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\n  if (tag === 'bitstr') {\n    return this._createEncoderBuffer([ str.unused | 0, str.data ]);\n  } else if (tag === 'bmpstr') {\n    const buf = Buffer.alloc(str.length * 2);\n    for (let i = 0; i < str.length; i++) {\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\n    }\n    return this._createEncoderBuffer(buf);\n  } else if (tag === 'numstr') {\n    if (!this._isNumstr(str)) {\n      return this.reporter.error('Encoding of string type: numstr supports ' +\n                                 'only digits and space');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'printstr') {\n    if (!this._isPrintstr(str)) {\n      return this.reporter.error('Encoding of string type: printstr supports ' +\n                                 'only latin upper and lower case letters, ' +\n                                 'digits, space, apostrophe, left and rigth ' +\n                                 'parenthesis, plus sign, comma, hyphen, ' +\n                                 'dot, slash, colon, equal sign, ' +\n                                 'question mark');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (/str$/.test(tag)) {\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'objDesc') {\n    return this._createEncoderBuffer(str);\n  } else {\n    return this.reporter.error('Encoding of string type: ' + tag +\n                               ' unsupported');\n  }\n};\n\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\n  if (typeof id === 'string') {\n    if (!values)\n      return this.reporter.error('string objid given, but no values map found');\n    if (!values.hasOwnProperty(id))\n      return this.reporter.error('objid not found in values map');\n    id = values[id].split(/[\\s.]+/g);\n    for (let i = 0; i < id.length; i++)\n      id[i] |= 0;\n  } else if (Array.isArray(id)) {\n    id = id.slice();\n    for (let i = 0; i < id.length; i++)\n      id[i] |= 0;\n  }\n\n  if (!Array.isArray(id)) {\n    return this.reporter.error('objid() should be either array or string, ' +\n                               'got: ' + JSON.stringify(id));\n  }\n\n  if (!relative) {\n    if (id[1] >= 40)\n      return this.reporter.error('Second objid identifier OOB');\n    id.splice(0, 2, id[0] * 40 + id[1]);\n  }\n\n  // Count number of octets\n  let size = 0;\n  for (let i = 0; i < id.length; i++) {\n    let ident = id[i];\n    for (size++; ident >= 0x80; ident >>= 7)\n      size++;\n  }\n\n  const objid = Buffer.alloc(size);\n  let offset = objid.length - 1;\n  for (let i = id.length - 1; i >= 0; i--) {\n    let ident = id[i];\n    objid[offset--] = ident & 0x7f;\n    while ((ident >>= 7) > 0)\n      objid[offset--] = 0x80 | (ident & 0x7f);\n  }\n\n  return this._createEncoderBuffer(objid);\n};\n\nfunction two(num) {\n  if (num < 10)\n    return '0' + num;\n  else\n    return num;\n}\n\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\n  let str;\n  const date = new Date(time);\n\n  if (tag === 'gentime') {\n    str = [\n      two(date.getUTCFullYear()),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else if (tag === 'utctime') {\n    str = [\n      two(date.getUTCFullYear() % 100),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else {\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\n  }\n\n  return this._encodeStr(str, 'octstr');\n};\n\nDERNode.prototype._encodeNull = function encodeNull() {\n  return this._createEncoderBuffer('');\n};\n\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\n  if (typeof num === 'string') {\n    if (!values)\n      return this.reporter.error('String int or enum given, but no values map');\n    if (!values.hasOwnProperty(num)) {\n      return this.reporter.error('Values map doesn\\'t contain: ' +\n                                 JSON.stringify(num));\n    }\n    num = values[num];\n  }\n\n  // Bignum, assume big endian\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\n    const numArray = num.toArray();\n    if (!num.sign && numArray[0] & 0x80) {\n      numArray.unshift(0);\n    }\n    num = Buffer.from(numArray);\n  }\n\n  if (Buffer.isBuffer(num)) {\n    let size = num.length;\n    if (num.length === 0)\n      size++;\n\n    const out = Buffer.alloc(size);\n    num.copy(out);\n    if (num.length === 0)\n      out[0] = 0;\n    return this._createEncoderBuffer(out);\n  }\n\n  if (num < 0x80)\n    return this._createEncoderBuffer(num);\n\n  if (num < 0x100)\n    return this._createEncoderBuffer([0, num]);\n\n  let size = 1;\n  for (let i = num; i >= 0x100; i >>= 8)\n    size++;\n\n  const out = new Array(size);\n  for (let i = out.length - 1; i >= 0; i--) {\n    out[i] = num & 0xff;\n    num >>= 8;\n  }\n  if(out[0] & 0x80) {\n    out.unshift(0);\n  }\n\n  return this._createEncoderBuffer(Buffer.from(out));\n};\n\nDERNode.prototype._encodeBool = function encodeBool(value) {\n  return this._createEncoderBuffer(value ? 0xff : 0);\n};\n\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function')\n    entity = entity(obj);\n  return entity._getEncoder('der').tree;\n};\n\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\n  const state = this._baseState;\n  let i;\n  if (state['default'] === null)\n    return false;\n\n  const data = dataBuffer.join();\n  if (state.defaultBuffer === undefined)\n    state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\n\n  if (data.length !== state.defaultBuffer.length)\n    return false;\n\n  for (i=0; i < data.length; i++)\n    if (data[i] !== state.defaultBuffer[i])\n      return false;\n\n  return true;\n};\n\n// Utility methods\n\nfunction encodeTag(tag, primitive, cls, reporter) {\n  let res;\n\n  if (tag === 'seqof')\n    tag = 'seq';\n  else if (tag === 'setof')\n    tag = 'set';\n\n  if (der.tagByName.hasOwnProperty(tag))\n    res = der.tagByName[tag];\n  else if (typeof tag === 'number' && (tag | 0) === tag)\n    res = tag;\n  else\n    return reporter.error('Unknown tag: ' + tag);\n\n  if (res >= 0x1f)\n    return reporter.error('Multi-octet tag encoding unsupported');\n\n  if (!primitive)\n    res |= 0x20;\n\n  res |= (der.tagClassByName[cls || 'universal'] << 6);\n\n  return res;\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","DEREncoder","entity","enc","name","tree","DERNode","_init","body","parent","Node","call","two","num","inherits","Buffer","der","prototype","encode","DEREncoder.prototype.encode","data","reporter","_encode","join","_encodeComposite","DERNode.prototype._encodeComposite","tag","primitive","cls","content","tagByName","hasOwnProperty","res","error","tagClassByName","length","header","alloc","encodedTag","_createEncoderBuffer","lenOctets","i","j","_encodeStr","DERNode.prototype._encodeStr","str","unused","buf","writeUInt16BE","charCodeAt","_isNumstr","_isPrintstr","test","_encodeObjid","DERNode.prototype._encodeObjid","id","values","relative","split","Array","isArray","slice","JSON","stringify","splice","size","ident","objid","offset","_encodeTime","DERNode.prototype._encodeTime","time","date","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","_encodeNull","DERNode.prototype._encodeNull","_encodeInt","DERNode.prototype._encodeInt","isBuffer","numArray","toArray","sign","unshift","from","out","copy","_encodeBool","DERNode.prototype._encodeBool","value","_use","DERNode.prototype._use","obj","_getEncoder","_skipDefault","DERNode.prototype._skipDefault","dataBuffer","state","_baseState","undefined","defaultBuffer","_encodeValue"]
}
