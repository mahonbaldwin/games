{
"version":3,
"file":"module$node_modules$browserify_sign$browser$sign.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/browserify-sign/browser/sign.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$browserify_sign$browser$sign\"] = function(global,require,module,exports) {\n// much of this based on https://github.com/indutny/self-signed/blob/gh-pages/lib/rsa.js\nvar Buffer = require('safe-buffer').Buffer\nvar createHmac = require('create-hmac')\nvar crt = require('browserify-rsa')\nvar EC = require('elliptic').ec\nvar BN = require('bn.js')\nvar parseKeys = require('parse-asn1')\nvar curves = require('./curves.json')\n\nfunction sign (hash, key, hashType, signType, tag) {\n  var priv = parseKeys(key)\n  if (priv.curve) {\n    // rsa keys can be interpreted as ecdsa ones in openssl\n    if (signType !== 'ecdsa' && signType !== 'ecdsa/rsa') throw new Error('wrong private key type')\n    return ecSign(hash, priv)\n  } else if (priv.type === 'dsa') {\n    if (signType !== 'dsa') throw new Error('wrong private key type')\n    return dsaSign(hash, priv, hashType)\n  } else {\n    if (signType !== 'rsa' && signType !== 'ecdsa/rsa') throw new Error('wrong private key type')\n  }\n  hash = Buffer.concat([tag, hash])\n  var len = priv.modulus.byteLength()\n  var pad = [0, 1]\n  while (hash.length + pad.length + 1 < len) pad.push(0xff)\n  pad.push(0x00)\n  var i = -1\n  while (++i < hash.length) pad.push(hash[i])\n\n  var out = crt(pad, priv)\n  return out\n}\n\nfunction ecSign (hash, priv) {\n  var curveId = curves[priv.curve.join('.')]\n  if (!curveId) throw new Error('unknown curve ' + priv.curve.join('.'))\n\n  var curve = new EC(curveId)\n  var key = curve.keyFromPrivate(priv.privateKey)\n  var out = key.sign(hash)\n\n  return Buffer.from(out.toDER())\n}\n\nfunction dsaSign (hash, priv, algo) {\n  var x = priv.params.priv_key\n  var p = priv.params.p\n  var q = priv.params.q\n  var g = priv.params.g\n  var r = new BN(0)\n  var k\n  var H = bits2int(hash, q).mod(q)\n  var s = false\n  var kv = getKey(x, q, hash, algo)\n  while (s === false) {\n    k = makeKey(q, kv, algo)\n    r = makeR(g, k, p, q)\n    s = k.invm(q).imul(H.add(x.mul(r))).mod(q)\n    if (s.cmpn(0) === 0) {\n      s = false\n      r = new BN(0)\n    }\n  }\n  return toDER(r, s)\n}\n\nfunction toDER (r, s) {\n  r = r.toArray()\n  s = s.toArray()\n\n  // Pad values\n  if (r[0] & 0x80) r = [0].concat(r)\n  if (s[0] & 0x80) s = [0].concat(s)\n\n  var total = r.length + s.length + 4\n  var res = [0x30, total, 0x02, r.length]\n  res = res.concat(r, [0x02, s.length], s)\n  return Buffer.from(res)\n}\n\nfunction getKey (x, q, hash, algo) {\n  x = Buffer.from(x.toArray())\n  if (x.length < q.byteLength()) {\n    var zeros = Buffer.alloc(q.byteLength() - x.length)\n    x = Buffer.concat([zeros, x])\n  }\n  var hlen = hash.length\n  var hbits = bits2octets(hash, q)\n  var v = Buffer.alloc(hlen)\n  v.fill(1)\n  var k = Buffer.alloc(hlen)\n  k = createHmac(algo, k).update(v).update(Buffer.from([0])).update(x).update(hbits).digest()\n  v = createHmac(algo, k).update(v).digest()\n  k = createHmac(algo, k).update(v).update(Buffer.from([1])).update(x).update(hbits).digest()\n  v = createHmac(algo, k).update(v).digest()\n  return { k: k, v: v }\n}\n\nfunction bits2int (obits, q) {\n  var bits = new BN(obits)\n  var shift = (obits.length << 3) - q.bitLength()\n  if (shift > 0) bits.ishrn(shift)\n  return bits\n}\n\nfunction bits2octets (bits, q) {\n  bits = bits2int(bits, q)\n  bits = bits.mod(q)\n  var out = Buffer.from(bits.toArray())\n  if (out.length < q.byteLength()) {\n    var zeros = Buffer.alloc(q.byteLength() - out.length)\n    out = Buffer.concat([zeros, out])\n  }\n  return out\n}\n\nfunction makeKey (q, kv, algo) {\n  var t\n  var k\n\n  do {\n    t = Buffer.alloc(0)\n\n    while (t.length * 8 < q.bitLength()) {\n      kv.v = createHmac(algo, kv.k).update(kv.v).digest()\n      t = Buffer.concat([t, kv.v])\n    }\n\n    k = bits2int(t, q)\n    kv.k = createHmac(algo, kv.k).update(kv.v).update(Buffer.from([0])).digest()\n    kv.v = createHmac(algo, kv.k).update(kv.v).digest()\n  } while (k.cmp(q) !== -1)\n\n  return k\n}\n\nfunction makeR (g, k, p, q) {\n  return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q)\n}\n\nmodule.exports = sign\nmodule.exports.getKey = getKey\nmodule.exports.makeKey = makeKey\n\n};"],
"names":["shadow$provide","global","require","module","exports","getKey","x","q","hash","algo","Buffer","from","toArray","length","byteLength","zeros","alloc","concat","hlen","bits","bits2int","mod","out","v","fill","k","createHmac","update","hbits","digest","obits","BN","shift","bitLength","ishrn","makeKey","kv","t","cmp","crt","EC","ec","parseKeys","curves","sign","key","hashType","signType","tag","priv","curve","Error","curveId","join","keyFromPrivate","privateKey","toDER","type","params","priv_key","p","g","r","H","s","toRed","mont","redPow","fromRed","invm","imul","add","mul","cmpn","res","len","modulus","pad","push","i"]
}
